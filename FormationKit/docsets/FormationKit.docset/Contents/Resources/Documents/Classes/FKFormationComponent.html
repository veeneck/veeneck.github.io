<!DOCTYPE html>
<html lang="en">
  <head>
    <title>FKFormationComponent Class Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset='utf-8'>
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
  </head>
  <body>
    <a name="//apple_ref/swift/Class/FKFormationComponent" class="dashAnchor"></a>
    <a title="FKFormationComponent Class Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="../index.html">FormationKit Docs</a></p>
        <p class="header-right"><a href="https://github.com/veeneck/FormationKit"><img src="../img/gh.png"/>View on GitHub</a></p>
        <p class="header-right"><a href="dash-feed://http%3A%2F%2Fveeneck%2Egithub%2Eio%2Fdocsets%2FFormationKit%2Exml"><img src="../img/dash.png"/>Install in Dash</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="../index.html">FormationKit Reference</a>
        <img id="carat" src="../img/carat.png" />
        FKFormationComponent Class Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="../Squads.html">Squads</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Classes/FKSquadEntity.html">FKSquadEntity</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Squad Components.html">Squad Components</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Classes/FKSquadAgent.html">FKSquadAgent</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/FKFormationComponent.html">FKFormationComponent</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/FKNavigationComponent.html">FKNavigationComponent</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/FKCasualtyComponent.html">FKCasualtyComponent</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/FKSquadDebugComponent.html">FKSquadDebugComponent</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Squad Formations.html">Squad Formations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Squad Formations.html#/s:P12FormationKit19FKFormationProtocol">FKFormationProtocol</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/FKStandingPosition.html">FKStandingPosition</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/FKGridFormation.html">FKGridFormation</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Units.html">Units</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Classes/FKUnitEntity.html">FKUnitEntity</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Unit Components.html">Unit Components</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Classes/FKUnitAgent.html">FKUnitAgent</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/FKRenderComponent.html">FKRenderComponent</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/FKMovementComponent.html">FKMovementComponent</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/FKRankComponent.html">FKRankComponent</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/FKDeathComponent.html">FKDeathComponent</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Unit Intelligence.html">Unit Intelligence</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Unit Intelligence.html#/s:C12FormationKit11FKIdleState">FKIdleState</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/FKFollowingState.html">FKFollowingState</a>
              </li>
              <li class="nav-group-task">
                <a href="../Unit Intelligence.html#/s:C12FormationKit12FKDyingState">FKDyingState</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Shared Classes.html">Shared Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Classes/FKMovementInstructions.html">FKMovementInstructions</a>
              </li>
              <li class="nav-group-task">
                <a href="../Shared Classes.html#/s:O12FormationKit14FKMovementType">FKMovementType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Shared Classes.html#/s:C12FormationKit23FKIntelligenceComponent">FKIntelligenceComponent</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Factories.html">Factories</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Classes/FKSquadFactory.html">FKSquadFactory</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/FKUnitFactory.html">FKUnitFactory</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Other Classes.html">Other Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Classes/FKEntitySpriteNode.html">FKEntitySpriteNode</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Other Functions.html">Other Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Other Functions.html#/s:ZF12FormationKitoi2eeFTCS_13FKSquadEntityS0__Sb">==(_:_:)</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            <h1>FKFormationComponent</h1>
              <div class="declaration">
                <div class="language">
                  <pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="kt">FKFormationComponent</span> <span class="p">:</span> <span class="kt">GKComponent</span></code></pre>

                </div>
              </div>
            <p>Tracks the desired formation, spacing, etc. Then, implements a strategy and determines desired positions.</p>

          </section>
          <section class="section task-group-section">
            <div class="task-group">
              <div class="task-name-container">
                <a name="/Update%20Loop"></a>
                <a name="//apple_ref/swift/Section/Update Loop" class="dashAnchor"></a>
                <a href="#/Update%20Loop">
                  <h3 class="section-name">Update Loop</h3>
                </a>
              </div>
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC12FormationKit20FKFormationComponent19updateWithDeltaTimeFS0_FSdT_"></a>
                    <a name="//apple_ref/swift/Method/updateWithDeltaTime(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC12FormationKit20FKFormationComponent19updateWithDeltaTimeFS0_FSdT_">updateWithDeltaTime(_:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Called each frame to update the component</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="k">override</span> <span class="kd">public</span> <span class="kd">func</span> <span class="nf">updateWithDeltaTime</span><span class="p">(</span><span class="nv">seconds</span><span class="p">:</span> <span class="kt">NSTimeInterval</span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC12FormationKit20FKFormationComponent31updateStrategyStandingPositionsFS0_FTGSqSf__T_"></a>
                    <a name="//apple_ref/swift/Method/updateStrategyStandingPositions(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC12FormationKit20FKFormationComponent31updateStrategyStandingPositionsFS0_FTGSqSf__T_">updateStrategyStandingPositions(_:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Rotate the squad and translate to squads current positions. 
Optionally pass in own heading to override squads agent heading</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">internal</span> <span class="kd">func</span> <span class="nf">updateStrategyStandingPositions</span><span class="p">(</span><span class="nv">heading</span><span class="p">:</span><span class="kt">Float</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <div class="task-name-container">
                <a name="/Positioning%20Units"></a>
                <a name="//apple_ref/swift/Section/Positioning Units" class="dashAnchor"></a>
                <a href="#/Positioning%20Units">
                  <h3 class="section-name">Positioning Units</h3>
                </a>
              </div>
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC12FormationKit20FKFormationComponent31assignStandingPositionToNewUnitFS0_FCS_12FKUnitEntityT_"></a>
                    <a name="//apple_ref/swift/Method/assignStandingPositionToNewUnit(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC12FormationKit20FKFormationComponent31assignStandingPositionToNewUnitFS0_FCS_12FKUnitEntityT_">assignStandingPositionToNewUnit(_:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Assumes existing units in squad, so will send this unit to the highest available priority position</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">assignStandingPositionToNewUnit</span><span class="p">(</span><span class="nv">unit</span><span class="p">:</span><span class="kt">FKUnitEntity</span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC12FormationKit20FKFormationComponent35reassignStandingPositionsByPriorityFS0_FT_T_"></a>
                    <a name="//apple_ref/swift/Method/reassignStandingPositionsByPriority()" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC12FormationKit20FKFormationComponent35reassignStandingPositionsByPriorityFS0_FT_T_">reassignStandingPositionsByPriority()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Imagine 3 random units die in the squad. Reassign will perform logic to move the closest units to fill the gaps
At the end of it, the squad should have a general shape again without units trying to walk through one another</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">reassignStandingPositionsByPriority</span><span class="p">()</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC12FormationKit20FKFormationComponent35reassignStandingPositionsByDistanceFS0_FT_T_"></a>
                    <a name="//apple_ref/swift/Method/reassignStandingPositionsByDistance()" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC12FormationKit20FKFormationComponent35reassignStandingPositionsByDistanceFS0_FT_T_">reassignStandingPositionsByDistance()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Does the same as reassignStandingPositionsByPriority except it actually checks the distance in the game layer
and moves the closest distance to each priority. Much more intensive, so it is used only when necessary (reforming)</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">reassignStandingPositionsByDistance</span><span class="p">()</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC12FormationKit20FKFormationComponentP33_06FCAC728E0236758DE8FE1D3DC589E928unassignAllStandingPositionsFS0_FT_T_"></a>
                    <a name="//apple_ref/swift/Method/unassignAllStandingPositions()" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC12FormationKit20FKFormationComponentP33_06FCAC728E0236758DE8FE1D3DC589E928unassignAllStandingPositionsFS0_FT_T_">unassignAllStandingPositions()</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Start with a clean slate by removing any existing orders to units</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">private</span> <span class="kd">func</span> <span class="nf">unassignAllStandingPositions</span><span class="p">()</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC12FormationKit20FKFormationComponent29unassignUnitsStandingPositionFS0_FCS_12FKUnitEntityT_"></a>
                    <a name="//apple_ref/swift/Method/unassignUnitsStandingPosition(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC12FormationKit20FKFormationComponent29unassignUnitsStandingPositionFS0_FCS_12FKUnitEntityT_">unassignUnitsStandingPosition(_:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Unassign position for 1 unit</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">internal</span> <span class="kd">func</span> <span class="nf">unassignUnitsStandingPosition</span><span class="p">(</span><span class="nv">unit</span><span class="p">:</span><span class="kt">FKUnitEntity</span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC12FormationKit20FKFormationComponentP33_06FCAC728E0236758DE8FE1D3DC589E932findUnitOccupyingClosestPositionFS0_FCS_18FKStandingPositionGSqCS_12FKUnitEntity_"></a>
                    <a name="//apple_ref/swift/Method/findUnitOccupyingClosestPosition(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC12FormationKit20FKFormationComponentP33_06FCAC728E0236758DE8FE1D3DC589E932findUnitOccupyingClosestPositionFS0_FCS_18FKStandingPositionGSqCS_12FKUnitEntity_">findUnitOccupyingClosestPosition(_:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>This function will search all rows behind the position that needs filling to see if there is a unit that can move</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">private</span> <span class="kd">func</span> <span class="nf">findUnitOccupyingClosestPosition</span><span class="p">(</span><span class="nv">standingPositionToFill</span><span class="p">:</span><span class="kt">FKStandingPosition</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">FKUnitEntity</span><span class="p">?</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC12FormationKit20FKFormationComponentP33_06FCAC728E0236758DE8FE1D3DC589E927getClosestUnitFromRowBehindFS0_FTSi14positionToFillCS_18FKStandingPosition_GSqCS_12FKUnitEntity_"></a>
                    <a name="//apple_ref/swift/Method/getClosestUnitFromRowBehind(_:positionToFill:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC12FormationKit20FKFormationComponentP33_06FCAC728E0236758DE8FE1D3DC589E927getClosestUnitFromRowBehindFS0_FTSi14positionToFillCS_18FKStandingPosition_GSqCS_12FKUnitEntity_">getClosestUnitFromRowBehind(_:positionToFill:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Score units based on how close they are to the position that needs filling. Favors outside units to fill spots
over inside units</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">private</span> <span class="kd">func</span> <span class="nf">getClosestUnitFromRowBehind</span><span class="p">(</span><span class="nv">rowBehind</span><span class="p">:</span><span class="kt">Int</span><span class="p">,</span> <span class="nv">positionToFill</span><span class="p">:</span><span class="kt">FKStandingPosition</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">FKUnitEntity</span><span class="p">?</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:FC12FormationKit20FKFormationComponentP33_06FCAC728E0236758DE8FE1D3DC589E935getBestUnitToReassignFromCurrentRowFS0_FTSi14positionToFillCS_18FKStandingPosition_GSqCS_12FKUnitEntity_"></a>
                    <a name="//apple_ref/swift/Method/getBestUnitToReassignFromCurrentRow(_:positionToFill:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:FC12FormationKit20FKFormationComponentP33_06FCAC728E0236758DE8FE1D3DC589E935getBestUnitToReassignFromCurrentRowFS0_FTSi14positionToFillCS_18FKStandingPosition_GSqCS_12FKUnitEntity_">getBestUnitToReassignFromCurrentRow(_:positionToFill:)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Have to come up with a smart forumla for this.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">private</span> <span class="kd">func</span> <span class="nf">getBestUnitToReassignFromCurrentRow</span><span class="p">(</span><span class="nv">row</span><span class="p">:</span><span class="kt">Int</span><span class="p">,</span> <span class="nv">positionToFill</span><span class="p">:</span><span class="kt">FKStandingPosition</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">FKUnitEntity</span><span class="p">?</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
            <div class="task-group">
              <div class="task-name-container">
                <a name="/Instructions"></a>
                <a name="//apple_ref/swift/Section/Instructions" class="dashAnchor"></a>
                <a href="#/Instructions">
                  <h3 class="section-name">Instructions</h3>
                </a>
              </div>
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:OC12FormationKit20FKFormationComponent11Arrangement"></a>
                    <a name="//apple_ref/swift/Enum/Arrangement" class="dashAnchor"></a>
                    <a class="token" href="#/s:OC12FormationKit20FKFormationComponent11Arrangement">Arrangement</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Flagged to determine what sort of AI / UI interactions the unit should respond to</p>

<ul>
<li>Grid: Rectangle based on columns</li>
<li>Triangle: As knights would line up, with leader in front</li>
<li>Skirmish: Random positioning around a central point</li>
</ul>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="kt">Arrangement</span> <span class="p">:</span> <span class="kt">Int</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </section>
        </section>
        <section id="footer">
          <p>&copy; 2016 <a class="link" href="http://battleofbrothers.com" target="_blank" rel="external">Ryan Campbell</a>. All rights reserved. (Last updated: 2016-02-23)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.4.1</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
